<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Update an existing schema document - MetaStore Cookbook</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../hierarchical_numbered_lists.css">
        <link rel="stylesheet" href="../chapter_list.css">
        <link rel="stylesheet" href="../theme-adjustments.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../about.html">About</a></li><li class="chapter-item "><a href="../introduction.html">MetaStore</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../technicalView.html">Technical View</a></li></ol></li><li class="chapter-item expanded "><a href="../introductionCookbook.html">Cookbook</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../schema/introduction.html">Schema Management</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../schema/select.html">Select/create a schema</a></li><li class="chapter-item "><a href="../schema/register.html">Register a new schema document</a></li><li class="chapter-item expanded "><a href="../schema/update.html" class="active">Update an existing schema document</a></li><li class="chapter-item "><a href="../schema/extend.html">Extend an existing schema document</a></li></ol></li><li class="chapter-item "><a href="../metadata/introduction.html">Metadata Management</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../metadata/ingest.html">Ingest a metadata document</a></li><li class="chapter-item "><a href="../metadata/read.html">Read a metadata document</a></li><li class="chapter-item "><a href="../metadata/update.html">Update an existing metadata document</a></li></ol></li><li class="chapter-item "><a href="../acl/introduction.html">Managing Access Rights</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../acl/accessible.html">Make Document available for other Users</a></li><li class="chapter-item "><a href="../acl/publish.html">Make Document public available</a></li><li class="chapter-item "><a href="../acl/reject.html">Disable public access for a single Document</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder" class="click-transparent"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title" title="MetaStore Cookbook">
                        MetaStore Cookbook
                    </h1>

                    <div class="right-buttons">
                        <div class="logo-spacing-general">
                            <a class="mobile-off logo-align-middle logo-card" href="https://kit.edu/" title="Karlsruhe Institute of Technology" aria-label="Visit the KIT Website">
                                <img class="lightonly" src="../kit_logo_en_black.svg" alt="KIT logo">
                                <img class="darkonly" src="../kit_logo_en_white.svg" alt="KIT logo">
                                <img class="whiteonly" src="../kit_logo_en.svg" alt="KIT logo">
                            </a>
                        </div>
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="ttps://github.com/kit-data-manager/metastore2/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="update-an-existing-schema-document"><a class="header" href="#update-an-existing-schema-document">Update an existing schema document</a></h1>
<p>Sometimes there are some typos in the registered schema or you want to extend
it with <strong>optional</strong> fields the schema may be updated. Therefor its version will
be incremented. Nevertheless all metadata documents already linked to the old
version are still valid as the version is part of the reference. The metadata 
documents and their metadata stayed untouched.</p>
<hr />
<h2 id="target-audience"><a class="header" href="#target-audience">Target Audience</a></h2>
<ul>
<li>Data Scientists</li>
</ul>
<hr />
<h2 id="ingredients"><a class="header" href="#ingredients">Ingredients</a></h2>
<ul>
<li>(local) MetaStore instance</li>
<li>Web Browser</li>
<li>Updated schema stored on local disc</li>
</ul>
<hr />
<h2 id="work-steps-summary"><a class="header" href="#work-steps-summary">Work Steps (Summary)</a></h2>
<h3 id="update-an-existing-schema-document-1"><a class="header" href="#update-an-existing-schema-document-1">Update an existing schema document</a></h3>
<ul>
<li>Step 1: Download existing schema</li>
<li>Step 2: Update existing schema locally</li>
<li>Step 3: Upload updated schema</li>
</ul>
<hr />
<h2 id="step-1-download-schema"><a class="header" href="#step-1-download-schema">Step 1: Download schema</a></h2>
<p>Right now editing schemas online is not supported. If the schema is no longer
locally available it has to be downloaded from MetaStore. To do so you have to
do the following steps:</p>
<ol>
<li>Press the 'View' icon of the wanted schema in the schema list.</li>
<li>Copy 'Schema Document Uri' to the address bar of your browser.</li>
<li>Right click page and select 'Save page as...' in the context menu. </li>
</ol>
<div class="centerbox">
    <img src="/images/SchemaManagement_Step3.png" alt="List of Schema Records" style="max-height:50em;" />
</div>
<h2 id="step-2-update-existing-schema-locally"><a class="header" href="#step-2-update-existing-schema-locally">Step 2: Update existing schema locally</a></h2>
<p>Extend the existing schema by an optional field containing notes. The updated schema
will look like this:
This example results in the following schema using the first link given above:</p>
<pre><code>{
    &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema&quot;,
    &quot;$id&quot;: &quot;http://example.com/example.json&quot;,
    &quot;type&quot;: &quot;object&quot;,
    &quot;title&quot;: &quot;The root schema&quot;,
    &quot;description&quot;: &quot;The root schema comprises the entire JSON document.&quot;,
    &quot;default&quot;: {},
    &quot;examples&quot;: [
        {
            &quot;author&quot;: &quot;Last Name, First Name&quot;,
            &quot;title&quot;: &quot;My first document&quot;,
            &quot;creation_date&quot;: &quot;2022-04-11&quot;
        }
    ],
    &quot;required&quot;: [
        &quot;author&quot;,
        &quot;title&quot;,
        &quot;creation_date&quot;
    ],
    &quot;properties&quot;: {
        &quot;author&quot;: {
            &quot;$id&quot;: &quot;#/properties/author&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;title&quot;: &quot;Author:&quot;,
            &quot;description&quot;: &quot;The person who wrote the document.&quot;,
            &quot;default&quot;: &quot;&quot;,
            &quot;examples&quot;: [
                &quot;Last Name, First Name&quot;
            ]
        },
        &quot;title&quot;: {
            &quot;$id&quot;: &quot;#/properties/title&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;title&quot;: &quot;Title:&quot;,
            &quot;description&quot;: &quot;The title of the document.&quot;,
            &quot;default&quot;: &quot;&quot;,
            &quot;examples&quot;: [
                &quot;My first document&quot;
            ]
        },
        &quot;creation_date&quot;: {
            &quot;$id&quot;: &quot;#/properties/creation_date&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;title&quot;: &quot;Creation Date:&quot;,
            &quot;description&quot;: &quot;Creation date in the format 'YYYY-MM-DD'.&quot;,
            &quot;default&quot;: &quot;2022-01-01&quot;,
            &quot;examples&quot;: [
                &quot;2022-04-11&quot;
            ]
        },
        &quot;note&quot;: {
            &quot;$id&quot;: &quot;#/properties/note&quot;,
            &quot;type&quot;: &quot;string&quot;,
            &quot;title&quot;: &quot;Additional note:&quot;,
            &quot;description&quot;: &quot;Add some additional notes here. (optional)&quot;,
            &quot;default&quot;: &quot;&quot;
        }
    },
    &quot;additionalProperties&quot;: false
}
</code></pre>
<p>As the entry 'notes' is not defined in the 'required' array this entry may be 
optional.
Store the new schema in a file named 'my_first_json_schema_version_2.json'.</p>
<h2 id="step-3-upload-updated-schema"><a class="header" href="#step-3-upload-updated-schema">Step 3: Upload updated schema</a></h2>
<p>Click the pencil of the appropriate schema and a form will open</p>
<div class="centerbox">
    <img src="/images/SchemaManagement_Step4.png" alt="Update Schema Record Form" style="max-height:50em;" />
</div>
<p>After selecting updated schema press 'Update Schema'. 
Now the version of the schema was increased.</p>
<div class="centerbox">
    <img src="/images/SchemaManagement_Step5.png" alt="Updated Schema List" style="max-height:50em;" />
</div>
<p>The new form for the metadata documents now looks like this:</p>
<div class="centerbox">
    <img src="/images/SchemaManagement_Step6.png" alt="New Schema Record Form" style="max-height:50em;" />
</div>
<p><em><strong>Congratulations, you successfully updated your schema!</strong></em></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../schema/register.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../schema/extend.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../schema/register.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../schema/extend.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script>
            function updateThemeElements() {
                try {
                    var html = document.querySelector('html');
                    var theme = localStorage.getItem('mdbook-theme');
                    var white_themes = ["light"]
                    var light_themes = ["rust"]
                    var light_only_elements = html.getElementsByClassName("lightonly")
                    var dark_only_elements = html.getElementsByClassName("darkonly")
                    var white_only_elements = html.getElementsByClassName("whiteonly")
                    console.log(theme)
                    console.log(light_themes)
                    if (light_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.remove("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    } else if (white_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.remove("hideme")
                        }
                    } else {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.remove("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    }
                } catch (e) { }
            }
            updateThemeElements() // call it once in the beginning
            // configure to call the function when theme changes.
            // the theme is stored as a class in the html tag, so we observe changes in this tag.
            var themeStorage = document.querySelector('html');
            const config = { attributes: true, childList: false, subtree: false };
            const callback = function(mutationsList, observer) {updateThemeElements()}
            const observer = new MutationObserver(callback);
            observer.observe(themeStorage, config);
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
